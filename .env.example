# =============================================================================
# Company Intel Bot — Environment Variables
# Copy this file to .env and fill in all CHANGEME values.
# NEVER commit .env to git.
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
NODE_ENV=development
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Database (PostgreSQL 16)
# -----------------------------------------------------------------------------
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=company_intel
POSTGRES_USER=company_intel
POSTGRES_PASSWORD=CHANGEME_strong_db_password

# Full DSN used by Prisma — matches values above
DATABASE_URL="postgresql://company_intel:CHANGEME_strong_db_password@localhost:5432/company_intel?schema=public"

# -----------------------------------------------------------------------------
# Redis (BullMQ + Rate Limiting)
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGEME_redis_password

# Full URL for BullMQ / ioredis
REDIS_URL="redis://:CHANGEME_redis_password@localhost:6379"

# -----------------------------------------------------------------------------
# Encryption (AES-256-GCM)
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# KEEP THIS SAFE — losing it means losing all encrypted integration configs
# -----------------------------------------------------------------------------
ENCRYPTION_KEY=CHANGEME_64_hex_chars_32_bytes_key_here

# -----------------------------------------------------------------------------
# JWT Auth
# Generate secrets with: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# -----------------------------------------------------------------------------
JWT_ACCESS_SECRET=CHANGEME_jwt_access_secret_here
JWT_REFRESH_SECRET=CHANGEME_jwt_refresh_secret_here
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# API (NestJS)
# -----------------------------------------------------------------------------
API_PORT=3001
API_URL=http://localhost:3001
# For production:
# API_URL=https://api.ai.corporatespec.com

# CORS — comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,https://ai.corporatespec.com

# Rate limiting defaults (can be overridden per-tenant in Admin UI)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=60

# -----------------------------------------------------------------------------
# Admin UI (Next.js)
# -----------------------------------------------------------------------------
WEB_PORT=3000
NEXT_PUBLIC_API_URL=http://localhost:3001
# For production:
# NEXT_PUBLIC_API_URL=https://api.ai.corporatespec.com

# Used by Next.js server-side (not exposed to browser)
NEXTAUTH_URL=http://localhost:3000
# For production:
# NEXTAUTH_URL=https://ai.corporatespec.com

NEXTAUTH_SECRET=CHANGEME_nextauth_secret_here

# -----------------------------------------------------------------------------
# Slack Integration
# -----------------------------------------------------------------------------
# Obtain from: https://api.slack.com/apps → Your App → Basic Information
SLACK_SIGNING_SECRET=CHANGEME_slack_signing_secret

# Default bot token — per-tenant tokens stored encrypted in DB
# SLACK_BOT_TOKEN is also entered per-tenant via Admin UI
SLACK_BOT_TOKEN=xoxb-CHANGEME

# -----------------------------------------------------------------------------
# LLM Providers
# Keys are entered per-tenant via Admin UI and stored encrypted in DB.
# These are fallback/development defaults only.
# -----------------------------------------------------------------------------
OPENAI_API_KEY=sk-CHANGEME
ANTHROPIC_API_KEY=sk-ant-CHANGEME
GOOGLE_GEMINI_API_KEY=CHANGEME

# Default LLM settings (overridden per-tenant in Admin UI)
DEFAULT_LLM_PROVIDER=openai
DEFAULT_LLM_MODEL=gpt-4o
DEFAULT_LLM_MAX_TOKENS=2048
DEFAULT_LLM_TEMPERATURE=0.3

# -----------------------------------------------------------------------------
# Gmail OAuth2 (configured per-tenant in Admin UI)
# Obtain from: https://console.cloud.google.com → APIs & Services → Credentials
# -----------------------------------------------------------------------------
GOOGLE_CLIENT_ID=CHANGEME.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGEME_google_client_secret
GOOGLE_REDIRECT_URI=http://localhost:3001/integrations/gmail/callback
# Production:
# GOOGLE_REDIRECT_URI=https://api.ai.corporatespec.com/integrations/gmail/callback

# -----------------------------------------------------------------------------
# BullMQ Worker
# -----------------------------------------------------------------------------
WORKER_CONCURRENCY=5
ENRICHMENT_JOB_TIMEOUT_MS=120000
ENRICHMENT_JOB_MAX_ATTEMPTS=3
ENRICHMENT_JOB_BACKOFF_DELAY_MS=5000

# -----------------------------------------------------------------------------
# Thread Memory
# -----------------------------------------------------------------------------
MEMORY_MAX_TURNS=20
MEMORY_MAX_CHARS=12000
MEMORY_SUMMARIZE_THRESHOLD_TURNS=15

# -----------------------------------------------------------------------------
# Seed / Super-Admin (used only by make seed)
# -----------------------------------------------------------------------------
SEED_ADMIN_EMAIL=admin@example.com
SEED_ADMIN_PASSWORD=CHANGEME_admin_password
SEED_TENANT_NAME=Default Tenant

# -----------------------------------------------------------------------------
# Production — Caddy / TLS
# -----------------------------------------------------------------------------
# TLS_EMAIL is used in Caddyfile for Let's Encrypt ACME
TLS_EMAIL=dpnh1989@gmail.com
ADMIN_DOMAIN=ai.corporatespec.com
API_DOMAIN=api.ai.corporatespec.com
